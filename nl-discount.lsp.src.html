<!DOCTYPE HTML PUBLIC "4.01 Transitional"><html><title>nl-discount</title><body><pre>
<font color='#555555'>;; <font color='#308080'>@module</font> nl-discount</font>
<font color='#555555'>;; <font color='#308080'>@index</font> http://github.com/aktowns/nl-discount</font>
<font color='#555555'>;; <font color='#308080'>@description</font> libmarkdown(discount) wrapper for new lisp. abstracting from ffi</font>
<font color='#555555'>;; <font color='#308080'>@location</font> http://www.pell.portland.or.us/~orc/Code/discount/</font>
<font color='#555555'>;; <font color='#308080'>@version</font> 0.01 - intial version working basic wrapper</font>
<font color='#555555'>;; <font color='#308080'>@version</font> 0.02 - documentation improvement, general code cleanup</font>
<font color='#555555'>;; <font color='#308080'>@author</font> Ashley Towns &lt;ashleyis@me.com&gt;</font>
<font color='#555555'>;;</font>
<font color='#555555'>;; this wrapper requires libmarkdown from 'http://www.pell.portland.or.us/~orc/Code/discount/'</font>
<font color='#555555'>;; you may need to compile it as a shared lib (-shared in the makefile)</font>
<font color='#555555'>;;</font>
<font color='#555555'>;; this is my first lisp script, it probably contains alot</font>
<font color='#555555'>;; of bugs / bad coding practice. Give me a shout if you see</font>
<font color='#555555'>;; anything out of place</font>

<font color='#AA0000'>(</font><font color='#0000AA'>load</font> <font color='#008800'>"utils.lsp"</font><font color='#AA0000'>)</font>

<font color='#AA0000'>(</font><font color='#0000AA'>context</font> 'nl-discount<font color='#AA0000'>)</font>

<font color='#AA0000'>(</font><font color='#0000AA'>set</font> 'files '<font color='#AA0000'>(</font>
	<font color='#008800'>"/usr/lib/libmarkdown.so"</font> <font color='#555555'>; Linux Fedora</font>
	<font color='#008800'>"/usr/local/lib/libmarkdown.so"</font> <font color='#555555'>; Linux, UNIX</font>
	<font color='#008800'>"/usr/local/lib/libmarkdown.dylib"</font> <font color='#555555'>; MacOS X (homebrew etc)</font>
	<font color='#008800'>"/usr/lib/libmarkdown.dylib"</font> <font color='#555555'>; MacOS X (other)</font>
	<font color='#008800'>"libmarkdown.dylib"</font>
	<font color='#008800'>"libmarkdown.so"</font>
<font color='#AA0000'>)</font><font color='#AA0000'>)</font>

<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> libmarkdown <font color='#008800'>"libmarkdown.dylib"</font><font color='#AA0000'>)</font>
<font color='#AA0000'>(</font><font color='#0000AA'>set</font> 'library <font color='#AA0000'>(</font>files <font color='#AA0000'>(</font><font color='#0000AA'>or</font>
	<font color='#AA0000'>(</font><font color='#0000AA'>find</font> <font color='#0000AA'>true</font> <font color='#AA0000'>(</font><font color='#0000AA'>map</font> <font color='#0000AA'>file?</font> files<font color='#AA0000'>)</font><font color='#AA0000'>)</font>
	<font color='#AA0000'>(</font><font color='#0000AA'>throw-error</font> <font color='#008800'>"cannot find libmarkdown library"</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>

<font color='#555555'>;; input functions</font>

<font color='#555555'>; MMIOT *mkd_in(FILE *f, int flags)</font>
<font color='#555555'>; reads a markdown input file and returns a MMIOT containing the preprocessed document. (which is then fed to markdown() for final formatting.)</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_in"</font><font color='#AA0000'>)</font>

<font color='#555555'>; MMIOT *mkd_string(char *bfr, int size, int flags)</font>
<font color='#555555'>; reads the markdown input file that’s been written into bfr and returns a preprocessed blob suitable for feedin to markdown().</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_string"</font><font color='#AA0000'>)</font>

<font color='#555555'>;; "Big Picture" - style processing functions</font>

<font color='#555555'>; int markdown(MMIOT *doc, FILE *out, int flags)</font>
<font color='#555555'>; formats a document (created with mkd_in() or mkd_string()) and writes the resulting HTML document to out.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"markdown"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_line(char *bfr, int size, char **out, int flags)</font>
<font color='#555555'>; allocates a buffer, then formats the text string into that buffer. text string, allocates a buffer, The differences from markdown() are it doesn’t support quoting, footnotes (“reference links”,) multiple paragraphs, lists, code sections, or pure html sections.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_line"</font><font color='#AA0000'>)</font>

<font color='#555555'>;; Fine-grained access to the internals</font>
<font color='#555555'>; int mkd_generateline(char*bfr, int size, FILE *out, int flags)</font>
<font color='#555555'>; formats the text string and writes the resulting HTML fragment to out. It is exactly like mkd_line() except that it writes the output to a FILE*.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_generateline"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_compile(MMIOT *doc, int flags)</font>
<font color='#555555'>; takes a document created by mkd_in() or mkd_string() and compiles it into a tree of block elements.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_compile"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_generatehtml(MMIOT *doc, FILE *out)</font>
<font color='#555555'>; generates html from a compiled document.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_generatehtml"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_document(MMIOT *doc, char **text)</font>
<font color='#555555'>; returns (in text) a pointer to the compiled html document, and (in the return code) the size of that document.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_document"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_css(MMIOT *doc, char **out)</font>
<font color='#555555'>; allocates a buffer and populates it with any style blocks found in the document.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_css"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_generatecss(MMIOT *doc, FILE *out)</font>
<font color='#555555'>; prints any style blocks in the document.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_generatecss"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_toc(MMIOT *doc, char **out)</font>
<font color='#555555'>; allocates a buffer, populates it with a table of contents, assigns it to out, and returns the length of the buffer.</font>
<font color='#555555'>; To get a table of contents, you must compile() the document with the MKD_TOC flag (described below)</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_toc"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_generatetoc(MMIOT *doc, FILE *out)</font>
<font color='#555555'>; writes a table of contents to out; other than writing to a FILE*, it operates exactly like mkd_toc()</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_generatetoc"</font><font color='#AA0000'>)</font>

<font color='#555555'>; int mkd_dump(MMIOT *doc, FILE *f, int flags, char *title)</font>
<font color='#555555'>; prints a block structure diagram of a compiled document.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_dump"</font><font color='#AA0000'>)</font>

<font color='#555555'>; void mkd_cleanup(MMIOT *doc)</font>
<font color='#555555'>; releases the MMIOT allocated for the document.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_cleanup"</font><font color='#AA0000'>)</font>

<font color='#555555'>;; Document header access functions</font>

<font color='#555555'>; char *mkd_doc_title(MMIOT *doc)</font>
<font color='#555555'>; returns the % title line.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_doc_title"</font><font color='#AA0000'>)</font>

<font color='#555555'>; char *mkd_doc_author(MMIOT *doc)</font>
<font color='#555555'>; returns the % author(s) line.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_doc_author"</font><font color='#AA0000'>)</font>

<font color='#555555'>; char *mkd_doc_date(MMIOT *doc)</font>
<font color='#555555'>; returns the % date line.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_doc_date"</font><font color='#AA0000'>)</font>

<font color='#555555'>;; URL callback functions</font>

<font color='#555555'>; void mkd_e_url(MMIOT*, char* (callback)(char*,int,void*))</font>
<font color='#555555'>; sets up a callback function that is called whenever discount processes a []() or &lt;link&gt; construct. The callback function is passed a pointer to the url, the size of the url, and a data pointer (null or supplied by mkd_e_data())</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_e_url"</font><font color='#AA0000'>)</font>

<font color='#555555'>; void mkd_e_flags(MMIOT*, char *(callback)(char*,int,void*))</font>
<font color='#555555'>; sets up a callback to provide additional arguments to the tags generated by []() and &lt;link&gt; constructs. If, for instance, you wanted to add target="_blank" to every generated url, you could just make a callback function that returned that string.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_e_flags"</font><font color='#AA0000'>)</font>

<font color='#555555'>; void mkd_e_free(char *, void*)</font>
<font color='#555555'>; is called to free any allocated memory returned by the url or flags callbacks.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_e_free"</font><font color='#AA0000'>)</font>

<font color='#555555'>; void mkd_e_data(MMIOT*, void*)</font>
<font color='#555555'>; assigns a callback data area to the url &amp; flags callbacks.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> libmarkdown <font color='#008800'>"mkd_e_data"</font><font color='#AA0000'>)</font>

<font color='#555555'>; The flags argument in markdown(), mkd_text(), mkd_in(), mkd_string(), mkd_compile(), and mkd_generatehtml() is a mask of the following flag bits:</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOLINKS 				<font color='#665500'>0x00000001</font><font color='#AA0000'>)</font>					<font color='#555555'>; Don’t do link processing, block &lt;a&gt; tags</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOIMAGE 				<font color='#665500'>0x00000002</font><font color='#AA0000'>)</font>					<font color='#555555'>; Don’t do image processing, block &lt;img&gt;</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOPANTS 				<font color='#665500'>0x00000004</font><font color='#AA0000'>)</font>					<font color='#555555'>; Don’t run smartypants()</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOHTML 					<font color='#665500'>0x00000008</font><font color='#AA0000'>)</font>					<font color='#555555'>; Don’t allow raw html through AT ALL</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> STRICT					<font color='#665500'>0x00000010</font><font color='#AA0000'>)</font>					<font color='#555555'>; Disable SUPERSCRIPT, RELAXED_EMPHASIS</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> TAGTEXT 				<font color='#665500'>0x00000020</font><font color='#AA0000'>)</font>					<font color='#555555'>; Process text inside an html tag; no &lt;em&gt;, no &lt;bold&gt;, no html or [] expansion</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NO-EXT 					<font color='#665500'>0x00000040</font><font color='#AA0000'>)</font>					<font color='#555555'>; Don’t allow pseudo-protocols</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> CDATA						<font color='#665500'>0x00000080</font><font color='#AA0000'>)</font>					<font color='#555555'>; Generate code for xml ![CDATA[...]]</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOSUPERSCRIPT		<font color='#665500'>0x00000100</font><font color='#AA0000'>)</font>					<font color='#555555'>; No A^B</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NORELAXED 			<font color='#665500'>0x00000200</font><font color='#AA0000'>)</font>					<font color='#555555'>; Emphasis happens everywhere</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOTABLES				<font color='#665500'>0x00000400</font><font color='#AA0000'>)</font>					<font color='#555555'>; Don’t process PHP Markdown Extra tables.</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOSTRIKETHROUGH <font color='#665500'>0x00000800</font><font color='#AA0000'>)</font>					<font color='#555555'>; Forbid ~~strikethrough~~</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> TOC 						<font color='#665500'>0x00001000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Do table-of-contents processing</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> ONE-COMPAT			<font color='#665500'>0x00002000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Compatability with MarkdownTest_1.0</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> AUTOLINK				<font color='#665500'>0x00004000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Make http://foo.com a link even without <>s</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> SAFELINK				<font color='#665500'>0x00008000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Paranoid check for link protocol</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOHEADER				<font color='#665500'>0x00010000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Don’t process document headers</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> TABSTOP					<font color='#665500'>0x00020000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Expand tabs to 4 spaces</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NODIVQUOTE			<font color='#665500'>0x00040000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Forbid >%class% blocks</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NOALPHALIST			<font color='#665500'>0x00080000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Forbid alphabetic lists</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> NODLIST					<font color='#665500'>0x00100000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Forbid definition lists</font>
<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> EXTRA-FOOTNOTE	<font color='#665500'>0x00200000</font><font color='#AA0000'>)</font>					<font color='#555555'>; Enable PHP Markdown Extra-style footnotes.</font>

<font color='#555555'>;; extra imports needed for dealing with files</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> <font color='#008800'>"libc.dylib"</font> <font color='#008800'>"fopen"</font><font color='#AA0000'>)</font>
<font color='#AA0000'>(</font><font color='#0000AA'>import</font> <font color='#008800'>"libc.dylib"</font> <font color='#008800'>"fclose"</font><font color='#AA0000'>)</font>

<font color='#555555'>;; <font color='#308080'>@syntax</font> (nl-discount:compile-markdown &lt;input-file&gt; &lt;output-file&gt; [&lt;flags&gt;])</font>
<font color='#555555'>;; <font color='#308080'>@param</font> &lt;input-file&gt; The markdown file you would like compiled to html</font>
<font color='#555555'>;; <font color='#308080'>@param</font> &lt;output-file&gt; The resulting file after compilation</font>
<font color='#555555'>;; <font color='#308080'>@param</font> &lt;flags&gt; - optional; flags for modifying the output</font>
<font color='#555555'>;; <font color='#308080'>@return</font> Returns nil</font>
<font color='#555555'>;;</font>
<font color='#555555'>;; The function 'compile-markdown' uses libc's fopen/fclose calls</font>
<font color='#555555'>;; in conjunction with mkd_in / markdown / mkd_cleanup to compile</font>
<font color='#555555'>;; a file into a html output. (abstracting away from directly dealing</font>
<font color='#555555'>;; with the C library)</font>
<font color='#555555'>;;</font>
<font color='#555555'>;; <font color='#308080'>@example</font></font>
<font color='#555555'>;; (nl-discount:compile-markdown "test.md" "out.html" (| TOC NOSTRIKETHROUGH))</font>
<font color='#555555'>;; => nil</font>
<font color='#555555'>;;</font>
<font color='#AA0000'>(</font><font color='#0000AA'>define</font> <font color='#AA0000'>(</font>compile-markdown-file input-file output-file <font color='#AA0000'>(</font>flags <font color='#665500'>0</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>
	<font color='#AA0000'>(</font><font color='#0000AA'>letn</font>
		<font color='#AA0000'>(</font><font color='#AA0000'>(</font>ifp <font color='#AA0000'>(</font>fopen input-file <font color='#008800'>"r"</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>ofp <font color='#AA0000'>(</font>fopen output-file <font color='#008800'>"w"</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>doc <font color='#AA0000'>(</font>mkd_in ifp flags<font color='#AA0000'>)</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>

		<font color='#AA0000'>(</font>markdown doc ofp flags<font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>mkd_cleanup doc<font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>fclose ifp<font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>fclose ofp<font color='#AA0000'>)</font> <font color='#0000AA'>nil</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>

<font color='#555555'>;; <font color='#308080'>@syntax</font> (nl-discount:compile-markdown-file &lt;input-string&gt; &lt;output-file&gt; [&lt;flags&gt;])</font>
<font color='#555555'>;; <font color='#308080'>@param</font> &lt;input-string&gt; The string containing markdown you would like compiled to html</font>
<font color='#555555'>;; <font color='#308080'>@param</font> &lt;output-file&gt; The resulting file after compilation</font>
<font color='#555555'>;; <font color='#308080'>@param</font> &lt;flags&gt; - optional; flags for modifying the output</font>
<font color='#555555'>;; <font color='#308080'>@return</font> Returns nil</font>
<font color='#555555'>;;</font>
<font color='#555555'>;; The function 'compile-markdown-file' uses libc's fopen/fclose calls</font>
<font color='#555555'>;; in conjunction with mkd_string / markdown / mkd_cleanup to compile</font>
<font color='#555555'>;; a string containing markdown into a html output. (abstracting away</font>
<font color='#555555'>;; from directly dealing with the C library)</font>
<font color='#555555'>;;</font>
<font color='#555555'>;; <font color='#308080'>@example</font></font>
<font color='#555555'>;; (nl-discount:compile-markdown-file "*oh hai*" "out.html" (| TOC NOSTRIKETHROUGH))</font>
<font color='#555555'>;; => nil</font>
<font color='#555555'>;;</font>
<font color='#AA0000'>(</font><font color='#0000AA'>define</font> <font color='#AA0000'>(</font>compile-markdown-string input-string output-file <font color='#AA0000'>(</font>flags <font color='#665500'>0</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>
	<font color='#AA0000'>(</font><font color='#0000AA'>letn</font>
		<font color='#AA0000'>(</font><font color='#AA0000'>(</font>doc <font color='#AA0000'>(</font>mkd_string input-string <font color='#AA0000'>(</font><font color='#0000AA'>length</font> input-string<font color='#AA0000'>)</font> flags<font color='#AA0000'>)</font><font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>ofp <font color='#AA0000'>(</font>fopen output-file <font color='#008800'>"w"</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>

		<font color='#AA0000'>(</font>markdown doc ofp flags<font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>mkd_cleanup doc<font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>fclose ofp<font color='#AA0000'>)</font> <font color='#0000AA'>nil</font> <font color='#AA0000'>)</font><font color='#AA0000'>)</font>

<font color='#555555'>;; <font color='#308080'>@syntax</font> (nl-discount:markdown-string &lt;input-string&gt; [&lt;flags&gt;])</font>
<font color='#555555'>;; <font color='#308080'>@param</font> &lt;input-string&gt; The string containing markdown you would like markdown'd</font>
<font color='#555555'>;; <font color='#308080'>@param</font> &lt;flags&gt; - optional; flags for modifying the output</font>
<font color='#555555'>;; <font color='#308080'>@return</font> Returns nil</font>
<font color='#555555'>;;</font>
<font color='#555555'>;; The function 'markdown-string' compiles a string of markdown valid</font>
<font color='#555555'>;; syntax and returns it as a string</font>
<font color='#555555'>;;</font>
<font color='#555555'>;; <font color='#308080'>@example</font></font>
<font color='#555555'>;; (nl-discount:markdown-string "*oh hai*" (| TOC NOSTRIKETHROUGH))</font>
<font color='#555555'>;; => "&lt;p&gt;&lt;em&gt;Oh hai&lt;/em&gt;&lt;/p&gt;"</font>
<font color='#555555'>;;</font>
<font color='#AA0000'>(</font><font color='#0000AA'>define</font> <font color='#AA0000'>(</font>markdown-string input-string <font color='#AA0000'>(</font>flags <font color='#665500'>0</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>
	<font color='#AA0000'>(</font><font color='#0000AA'>setq</font> markdown-ptr-output <font color='#AA0000'>(</font><font color='#0000AA'>dup</font> <font color='#008800'>"&#092;000"</font> <font color='#AA0000'>(</font><font color='#0000AA'>length</font> input-string<font color='#AA0000'>)</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>
	<font color='#AA0000'>(</font><font color='#0000AA'>letn</font>
		<font color='#AA0000'>(</font><font color='#AA0000'>(</font>doc <font color='#AA0000'>(</font>mkd_string input-string <font color='#AA0000'>(</font><font color='#0000AA'>length</font> input-string<font color='#AA0000'>)</font> flags<font color='#AA0000'>)</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>

		<font color='#AA0000'>(</font>mkd_compile doc flags<font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>mkd_document doc markdown-ptr-output<font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font>mkd_cleanup doc<font color='#AA0000'>)</font>
		<font color='#AA0000'>(</font><font color='#0000AA'>get-string</font> <font color='#AA0000'>(</font>utils:address-address markdown-ptr-output<font color='#AA0000'>)</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font><font color='#AA0000'>)</font>

<font color='#555555'>; (exit)</font>

</pre><center><font face='Arial' size='-3' color='#666666'>syntax highlighting with <a href="http://newlisp.org">newLISP</a>&nbsp;and <a href="http://newlisp.org/newLISPdoc.html">newLISPdoc</a></font></center></body></html>